# Сводка: Что можно извлечь из страницы экскурсии

## На основе HTML страницы "Газпром Поляна"

### ✅ Базовые данные (100% извлекаемо)

1. **Название экскурсии**
   - Источник: `<h1 itemprop="name">`
   - Пример: "Курорт «Газпром Поляна» - 2 вершины за 1 день: Альпика+Лаура"

2. **Краткое описание**
   - Источник: `<div class="product-short-description">`
   - Пример: "Две вершины за один день!"

3. **Мета-данные**
   - `<meta name="title">`
   - `<meta name="description">`
   - `<title>`

### ✅ Цены (100% извлекаемо)

4. **Основная цена**
   - Источник: `<span class="PricesalesPrice">3000 руб</span>`
   - Альтернатива: JSON-LD `"price": "3000"`

5. **Цены по точкам отправления (2 формата)**

   **Формат 1: Простой**
   - `Отправление из Сочи - 1000 р.`
   - `Отправление из Хосты - 900 р.`
   - `Отправление из Адлера - 500 р.`

   **Формат 2: С разделением на взрослых/детей** ⭐
   - `Отправление из Сочи - 3000р.взр./ 2500р.дет.(7-14)`
   - `Отправление из Хосты - 3000р.взр./ 2500р.дет.(7-14)`
   - `Отправление из Адлера-3000р.взр./ 2500р.дет.(7-14)`

   **Структура данных:**
   ```json
   {
     "location": "Сочи",
     "price_adult": "3000р.",
     "price_child": "2500р.",
     "child_age": "7-14",
     "price": "3000р. взр. / 2500р. дет. (7-14)"
   }
   ```

### ✅ Временные параметры (100% извлекаемо)

6. **Продолжительность**
   - Источник: `<div class="product-field-display">Продолжительность: 9-10ч</div>`
   - Форматы: "10ч", "9-10ч", "5 часов"

### ✅ Точки посадки (100% извлекаемо)

7. **Список точек с временем**
   - Источник: `<select><option value="303">Лавровая - 11:00</option>`
   - Структура:
     ```json
     {
       "location": "Лавровая",
       "time": "11:00",
       "option_id": "303"
     }
     ```

### ✅ Дополнительные расходы (100% извлекаемо)

8. **Дополнительные расходы (2 типа)**

   **Тип 1: Дополнительные платежи**
   - `1700 р. / 1400 р. (с 5 лет до 17 лет вкл.) - переправа, концерт, экологический сбор`
   
   **Тип 2: Включено в стоимость** ⭐
   - `Канатная дорога на курорте «Газпром Поляна»-включена в стоимость.`
   
   **Структура:**
   ```json
   {
     "description": "Канатная дорога",
     "included": true
   }
   ```
   или
   ```json
   {
     "price": "1700 р. / 1400 р.",
     "description": "переправа, концерт, экологический сбор",
     "included": false
   }
   ```

### ✅ Контент (100% извлекаемо)

9. **Полное описание**
   - Источник: `<div class="product-description">`
   - Содержит: параграфы с полным текстом описания

10. **Изображения**
    - Основное: `<div class="main-image"><img src="/images/virtuemart/product/3s-kabinka.jpg">`
    - Галерея: 9+ изображений в `<div class="additional-images">`
    - Alt-тексты для всех изображений

### ✅ Структурированные данные (100% извлекаемо)

11. **JSON-LD Schema.org**
    ```json
    {
      "@type": "Product",
      "name": "Курорт «Газпром Поляна» - 2 вершины за 1 день: Альпика+Лаура",
      "image": "https://hostaotdykh.ru/images/virtuemart/product/3s-kabinka.jpg",
      "description": "Две вершины за один день!",
      "offers": {
        "priceCurrency": "RUB",
        "price": "3000"
      }
    }
    ```

### ✅ Технические данные (100% извлекаемо)

12. **ID продукта**
    - `<input type="hidden" name="virtuemart_product_id[]" value="42"/>`

13. **Категория**
    - Из URL: `/ekskursii/ekskursii-sochi/газпром-лаура-альпика-detail.html` → "Сочи"
    - Из навигации: меню "Экскурсии" → "Сочи"

### ⚠️ Сложные для извлечения

14. **Календарь доступных дат**
    - Генерируется через JavaScript: `<div id="event-calendar"></div>`
    - Требует: Selenium или другой инструмент для работы с JS

15. **Динамические цены**
    - Могут меняться в зависимости от выбранной точки посадки
    - Требует: анализ JavaScript-кода или тестирование

## Итоговая структура данных

```json
{
  "url": "https://hostaotdykh.ru/ekskursii/...",
  "title": "Курорт «Газпром Поляна» - 2 вершины за 1 день: Альпика+Лаура",
  "short_description": "Две вершины за один день!",
  "description": "Полное описание...",
  "price": "3000 руб",
  "duration": "9-10ч",
  "pickup_points": [
    {
      "location": "Сочи",
      "time": null,
      "option_id": null,
      "price_adult": "3000р.",
      "price_child": "2500р.",
      "child_age": "7-14",
      "price": "3000р. взр. / 2500р. дет. (7-14)"
    },
    {
      "location": "Хоста",
      "time": null,
      "option_id": null,
      "price_adult": "3000р.",
      "price_child": "2500р.",
      "child_age": "7-14",
      "price": "3000р. взр. / 2500р. дет. (7-14)"
    },
    {
      "location": "Адлер",
      "time": null,
      "option_id": null,
      "price_adult": "3000р.",
      "price_child": "2500р.",
      "child_age": "7-14",
      "price": "3000р. взр. / 2500р. дет. (7-14)"
    }
  ],
  "pickup_points_detailed": [
    {
      "location": "Лавровая",
      "time": "11:00",
      "option_id": "303"
    }
  ],
  "additional_costs": [
    {
      "description": "Канатная дорога на курорте «Газпром Поляна»",
      "included": true
    }
  ],
  "images": [
    {
      "url": "https://hostaotdykh.ru/images/virtuemart/product/3s-kabinka.jpg",
      "alt": "",
      "is_main": true
    },
    {
      "url": "https://hostaotdykh.ru/images/virtuemart/product/Gazprom_Laura-verh.jpg",
      "alt": "Gazprom_Laura-verh",
      "is_main": false
    }
  ],
  "product_id": "42",
  "category": "Сочи",
  "metadata": {
    "canonical_url": "https://hostaotdykh.ru/ekskursii/ekskursii-sochi/газпром-лаура-альпика-detail.html",
    "json_ld": {
      "@type": "Product",
      "name": "...",
      "price": "3000"
    }
  }
}
```

## Статистика извлечения

- **100% извлекаемо**: 13 полей
- **Требует JavaScript**: 2 поля (календарь, динамические цены)
- **Всего полей**: 15

## Рекомендации

1. ✅ Приоритет на извлечение цен с разделением взрослый/ребенок
2. ✅ Различать "дополнительные расходы" и "включено в стоимость"
3. ✅ Извлекать точки посадки из `<select>` с временем и ID
4. ⚠️ Календарь дат требует Selenium для полного извлечения

